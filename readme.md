# mongo 中遇到的问题

````
1.当更新或者查找子内嵌对象中的属性值的时候 id 
  这个属性一定要与数据库中对应，数据库中有可能存储的是_id;
2. 新增的时候有可能用到 upsert 方法，这个方法 是先根据参数匹配，如果有负荷要求就更新，不符合要求
  句插入一条数据，所以如果重复数据很少的话不建议使用，最好使用专门的插入方法insert。
 ````
 
 ### mongo中的相关命令
 - 利用分组求和 查询查询某个字段在文档中的总个数
    > db.student.aggregate([{"$group":{"_id":"$sex","总人数":{"$sum":1}}}])
 - 如果需要统计数组对象那么需要用到$unwind
    > db.student.aggregate([{"$match":{"sex":"男"}},{"$unwind":"$courses"},{"$match":{"courses.name":"数学","courses.code":{"$gt":"60","$lt":"100"}}},{"$group":{"_id":"$sex"},"sex_code":{"$sum":1}}}])
 - 定位符$像一个占位符，匹配第一个符合查询条件的值的位置。